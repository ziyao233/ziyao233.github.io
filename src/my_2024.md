# 有趣的 2024

我是个超级大鸽子，2024 的年终总结到 2025 快过一半了才写。

## 开源生活

> 你摆烂，我摆烂，开源灵车更破烂。

2024 年绝大多数的工作都围绕着 [eweOS](https://os.ewe.moe) 展开来，水的东西实在
太多，就挑拣几个比较 impressive 的讲一讲。

- 五月份把 eweOS 修到了能~~上桌~~上真机的水平：从 AOSCC 2024 之后，我就闲置了
  Alpine Linux 的 Chrome Book，一直用松下笔记本配羊 OS 做内核修东西，算是开始
  dogfooding 了。
- 第一次真正接触了主线化工作
  - 发了第一个 patch 给 meson-drm 修了修 [resource leak](https://lore.kernel.org/all/20240703155826.10385-2-ziyao@disroot.org/)
  - 第一次给 Linux 内核移植了一个[新平台，RK3528](https://lore.kernel.org/all/20240829092705.6241-2-ziyao@disroot.org/)
  - 从此搞主线的热情就一发不可收拾了
- 在[ksco 老师](https://github.com/ksco)的指导下，开始建设了
  [DynamoRIO](https://github.com/DynamoRIO/dynamorio/pulls?q=is%3Apr+author%3Aziyao233+created%3A2024-01-01..2024-12-31)
  这个项目绝对是我见过最 hacking 的实践，但写起来真的很好玩很开心，一切对二进制
  对架构对内核的理解都可以 play a role，孩子很喜欢。
- 和 busybox 反复拉扯好几次，要么是给 eweOS 打包的时候遇见了啥 bug，要么是看见
  邮件列表有人报 bug，出于同情心搞搞开源灵车
  - [修复 awk 对 substitution 中反斜杠的处理](https://lists.busybox.net/pipermail/busybox/2024-December/091040.html)
  - [修复 sed 对正则 bracket expression 中反斜杠的处理)(https://lists.busybox.net/pipermail/busybox/2024-November/091023.html)
  - 转义符号真的是人类之大敌啊
  - awk 的修复被 Alpine Maintainer [Acked-by](https://lists.busybox.net/pipermail/busybox/2024-December/091047.html)
    的时候，心情真的很激动
  - Busybox 维护者太摆烂了，真的很难受
- 给 Limine bootloader 实现了 [riscv64](https://github.com/limine-bootloader/limine/pull/370)
  和 [loongarch64](https://github.com/limine-bootloader/limine/pull/439) 实现了
  Linux 的启动协议支持
  - 写这个的时候看着 GRUB 和 U-Boot 和 efistub 的源码，感觉自己逐渐理解一切
  - 被创飞四五次后有了 [How Linux Boots: the Linux Boot Protocol](https://ziyao233.github.io/linux_boot_protocol.html) 一文

或许努力做点有用的开源贡献是我的归宿吧。

## 东百往事：往东北来又离东北去

哈尔滨是个很神奇的地方，我坐着硬座来又坐着硬座一次次离开，或是被寒冬窒息的干燥
呛得一路咳嗽着拖着行李箱踉跄，或是被入秋后的冷风把一夜未眠的绿皮车气味冻了个精
光。

在哈尔滨的基调就是冷的，人行道的雪堆在一旁，习惯后就感觉它就该呆在那一样：以至
于四月解冻的时候我还感觉路上少了什么，盯着地上一摊摊的融水发愣。太阳是四点就消
失的，住过一段时间实在能够理解北欧这种高纬度地区抑郁率居高不下的传言。

雪啊，没见过四月才化的雪。呆不下去，得跑。

## AOSCC 2024

七月中旬的 AOSCC 2024 是很有趣的一个转折点，把我从独自一人搞创东西的生活带了出
来，找到了更多的信创伙伴。

> 有新的旅行伙伴加入了哟

正式议程的前一天晚上到了吉林的会场，虽然是临着的省份，夏天还是能明显感觉出天气
热了一大截，万幸的是会场（理所当然地）有空调。顺手折腾了一下会场展示的 3A6000，
用 Clang cross 了一个 x86 的 ELF 然后出乎意料的就被 LATX 跑起来了....AOSC 的集
成度确实做的很好~~不像某些 users are required to be developers 的发行版~~。当天
见到了不少只对头像和 nickname 有印象的群友：前台调设备的
[被子饼老师](https://github.com/KexyBiscuit)，
一起参会的 [Cryolitia 老师](https://github.com/Cryolitia) 和
[浅见沙织老师](https://github.com/CoelacanthusHex)。
[白特首](https://github.com/MingcongBai)本人感觉有一种气场，我这个社恐的性格说
实话一开始是怕直接说话的——不过任何一个活动，只要参加者的要素够创，总是能找到够
创的话题填上气氛的空白。对我这种不善（现实）交际的人有一种天然的亲和力。

第零天比较有趣的事情是签到 + 入住酒店的时候遇见了住同一层的
[冰猫（aisuneko）](https://github.com/aisuneko)同学，在 IM 上一顿“刚刚那个是你
吗”的交流之后来了个群友现场认亲。

没记错应该是会议的第一天见到了很帅的 [Revy 老师](https://github.com/RevySR)
和很帅的[飞羊老师](https;//github.com/FlyGoat)，还有很帅的 xen0n ~~至强~~老师的
气氛很活跃的龙架构生态的报告——感觉 xen0n 老师讲话总是带着自己很独特的风格——也给
AOSC 24 年的架构代号 `localhost` 投了一票。第二天的抽奖非常幸运的拿到了一台
KP920 主板。虽然我并没有像承诺的一样日用 ARM64 桌面，而且这台机器在服役半年后离
奇暴毙了，希望上天不会因此降下神罚吧。至于成功抽到了自己捐赠的 2K0300 久久派并
要按照自己的要求做主线的飞羊老师，截止本文写作时（2025 的 AOSCC 地址已经定下了
）2K0300 的主线化进程仍无显著进展~~有人要催了！~~

意料之外的是 eweOS 成功申请到了 AOSCC 上作为讲者分享内容的机会，我与
[YukariChiba](https://github.com/YukariChiba)一起作为讲者介绍了一下两年多来的成
果。作为我独自生活以来第一次在比较正式的场合分享内容，上台前还是很紧张的。不过
准备这次分享的 slides 期间还是学到了很多东西，也确实让 eweOS 的工作往前走了不小
的一步——作为一个如此实验性的发行版，它的未来谁知道呢～。

## 2024 年初的目标做了多少？

- 学数字信号处理：可以说是完全没学
- 在 U-Boot 拥有一个自己贡献的平台移植：没有 U-Boot 贡献，但是确实给内核移植了
  RK3528
- 推几个 patch 到 U-Boot/busybox：推了，但是没进
- C + Lua 写一个 Game engine：完全没想起来这件事情
- C + Lua 写一个 Telegram bot 框架：之前确实用 Lua + libcurl 做了一个 antispam
  bot，这算吗？
- 给 TinyCC port 到 MIPS：已经对 MIPS 失望了
- 给 rv64gc 从头写一个编译器：没有实现，这件事情可能要排到 2026 了

## 2025 想做的事情？

虽然现在才写有点晚了，不过，

- 狠狠地搞开源基建
- 成为内核/U-Boot 某个 part 的 maintainer/reviewer：虽然有没有地方需要
  maintainer 其实是一件很随机的事情，但这是我一直以来的愿望。
- 学会 Rust
- 学会写硬逻辑，搓一个自己的 CPU core
- 好好活到年末
